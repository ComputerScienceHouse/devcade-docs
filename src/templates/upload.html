{% extends "header.html" %}
{% block title %}{{title}}{% endblock %}
{% block headertext %} Upload Files {%endblock%}
{% block content %}
{% if current_user.is_authenticated %}
<div class="card-wrapper">
    <div class="card">
        <h2>Drop your files here:</h2>
        <form action = "/upload_game" method="POST" enctype="multipart/form-data">
        <img style="border-color:gray;border-style: dashed" class="max" src="{{ url_for('static', filename='images/csh_tilted.png') }}" />
        <input type="text" name="title" placeholder="title">
        <input type="file" name="file" accept=".zip">
        <input class="btn btn-red" id="apply" value="Upload" type="submit"></input>
        </form>
    </div>
    <div class="card">
        <h2>How to Upload:</h2>
        <ol>
            <li>Navigate to the folder containing your Monogame game.</li>
            <li>Run <br><code>dotnet publish -c Release -r linux-x64 --no-self-contained</code></li>
            <li>Navigate to the newly created publish folder.</li>
            <li>Create a manifest.json file with <u><a href="">this format</a></u> in that folder</li>
            <li>Create a zip archive of all files in this folder</li>
            <li>Upload file</li>
        </ol>
    </div>
</div>
    <h1>Your files:</h1>
<div id="card-wrapper">
{% for i in gamelist %}
<a href="/game/i.id }}">
<div class="card">
    <h2>{{ i.title }}</h2>
    <p>{{ i.author }}</p>
    <img class="max" src="{{ url_for('static', filename='images/csh_tilted.png') }}" />
    <p>{{ i.desc }}</p>
    <p></p>
    <a class="btn btn-red" href="/edit/{{ i.id }}">Edit</a>
</div>
</a>
{% endfor %}
{% if gamelist|length == 0 %}
<h2>You have no uploads!</h2>
{% endif %}
</div>
{% else %}
<p id="description">This shouldn't be possible.  You're not authorized but you are logged in?  wacky.</p>
{% endif %}
{% endblock %}