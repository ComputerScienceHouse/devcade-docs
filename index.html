<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify/lib/themes/dark.css" />
  <link rel="shortcut icon" href="/_media/DevcadeLogoNoText.png"> 
</head>
<body>
  <div id="app"></div>
  <script>
    window.$docsify = {
      name: 'Devcade Documentation',
      logo: '/_media/DevcadeLogoThin.png',
      alias: {
        '/website-repo': 'https://raw.githubusercontent.com/ComputerScienceHouse/devcade-website/main/',
        '/library-repo': 'https://raw.githubusercontent.com/ComputerScienceHouse/Devcade-library/main/',
        '/onboard-repo': 'https://raw.githubusercontent.com/ComputerScienceHouse/devcade-onboard/main/',
        '/api-repo': 'https://raw.githubusercontent.com/ComputerScienceHouse/devcade-api/master/',
        '/template-repo': 'https://raw.githubusercontent.com/ComputerScienceHouse/Devcade-game-template/main/',
        '/flatpackify-repo': 'https://raw.githubusercontent.com/ComputerScienceHouse/devcade-flatpakify/master/'
      },
      relativePath: true,
      loadSidebar: true,
      subMaxLevel: 2,
      plugins: [
        // Custom plugin from docsify's own repo. modified to work with non-master branches
        function (hook, vm) {
            hook.beforeEach(markdown => {
              if (/githubusercontent\.com/.test(vm.route.file)) {
                url = vm.route.file
                  .replace('raw.githubusercontent.com', 'github.com')
                  // Regex captures everything before the branch in one group, and the 
                  // branch onwards in another. Then add blob between
                  .replace(/(github.com\/.*\/.*\/)(.*\/.*)/, "$1edit/$2");
              } else if (/jsdelivr\.net/.test(vm.route.file)) { // We wont use this so I'm not gonna bother fixing
                url = vm.route.file
                  .replace('cdn.jsdelivr.net/gh', 'github.com')
                  .replace('@master', '/blob/master');
              } else {
                url =
                  'https://github.com/ComputerScienceHouse/devcade-docs/blob/docs/docs/' +
                  vm.route.file;
              }
              // Switched to inserting html so it could be right aligned.
              // The html is copied directly from the browser what the md would
              // render plus the style float right
              const editMd = //'[:memo: Edit Document](' + url + ')\n'
                `<p style="float: right">
                  <a href="${url}" target="_blank" rel="noopener">
                    <img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4dd.png?v8.png" alt="memo" class="emoji" loading="lazy">
                     Edit on github
                  </a>
                </p>\n\n`;
              return (
                editMd +
                markdown
              );
            });
          },
      ]
    }
  </script>
  <!-- Docsify v4 -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4">
  </script>
</body>
</html>
